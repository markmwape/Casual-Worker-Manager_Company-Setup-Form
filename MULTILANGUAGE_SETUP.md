# Multi-Language Support Documentation

## Overview

Your Casual Worker Manager application now supports **10 languages**:

1. ğŸ‡¬ğŸ‡§ **English** (en)
2. ğŸ‡«ğŸ‡· **French** (fr)
3. ğŸ‡¹ğŸ‡¿ **Swahili** (sw)
4. ğŸ‡µğŸ‡¹ **Portuguese** (pt)
5. ğŸ‡ªğŸ‡¸ **Spanish** (es)
6. ğŸ‡¹ğŸ‡· **Turkish** (tr)
7. ğŸ‡®ğŸ‡³ **Hindi** (hi)
8. ğŸ‡¨ğŸ‡³ **Chinese** (zh)
9. ğŸ‡¸ğŸ‡¦ **Arabic** (ar)

## Features

### 1. **Language Switcher Button**
- Available on every relevant page
- Located in the sidebar (near Sign Out button)
- Also available in the header component
- Click the globe icon (ğŸŒ) to select your preferred language

### 2. **User Language Preference**
- Language preference is saved to the database
- Automatically loads user's preferred language on next login
- Can be changed anytime from the language switcher

### 3. **Browser Language Detection**
- If user is not logged in, the app detects their browser's language
- Falls back to English if browser language is not supported

## Implementation Details

### Database Changes
- Added `language_preference` column to the `User` table
- Stores user's selected language code (default: 'en')

### New Files Created

1. **`language_routes.py`**
   - Handles language switching API endpoints
   - `/api/change-language` - POST endpoint to change language
   - `/api/languages` - GET endpoint to fetch available languages

2. **`translation_manager.py`**
   - Python utility for managing translations
   - Contains all translatable strings
   - Can export translations to JSON files

3. **`static/js/i18n.js`**
   - Frontend JavaScript translation utility
   - Functions for translating page elements
   - Manages language switching

4. **`templates/components/language_switcher.html`**
   - Reusable language switcher component
   - Dropdown menu with all available languages

5. **`static/translations/`** (directory)
   - JSON translation files for each language
   - Generated by `translation_manager.py`

## How to Use

### For Developers - Adding New Translations

1. **Update Python Backend:**
   ```python
   # In translation_manager.py, add to TRANSLATIONS dict:
   "Your English Text": {
       "fr": "Votre texte franÃ§ais",
       "sw": "Maandishi yako ya Kiswahili",
       "pt": "Seu texto em portuguÃªs",
       # ... etc for other languages
   }
   ```

2. **Generate JSON Translation Files:**
   ```bash
   python translation_manager.py
   ```

3. **In HTML Templates - Use data-i18n attribute:**
   ```html
   <button data-i18n="Sign Out">Sign Out</button>
   <label data-i18n="Dashboard">Dashboard</label>
   ```

4. **In JavaScript - Use the i18n.t() function:**
   ```javascript
   const translatedText = window.i18n.t('Your English Text');
   ```

### For Users - Changing Language

1. Click the globe icon (ğŸŒ) in the sidebar or header
2. Select your preferred language from the dropdown
3. The page will reload with the selected language
4. Your preference is automatically saved

## API Endpoints

### 1. Change Language
```
POST /api/change-language
Content-Type: application/json

Body:
{
    "language": "fr"  // Language code (en, fr, sw, pt, es, tr, hi, zh, ar)
}

Response:
{
    "success": true,
    "language": "fr"
}
```

### 2. Get Available Languages
```
GET /api/languages

Response:
{
    "languages": {
        "en": "English",
        "fr": "FranÃ§ais",
        "sw": "Swahili",
        "pt": "PortuguÃªs",
        "es": "EspaÃ±ol",
        "tr": "TÃ¼rkÃ§e",
        "hi": "à¤¹à¤¿à¤‚à¤¦à¥€",
        "zh": "ä¸­æ–‡",
        "ar": "Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©"
    },
    "current_language": "en"
}
```

## Installation Steps (Summary)

1. âœ… Updated `requirements.txt` with Flask-Babel
2. âœ… Added `language_preference` field to User model
3. âœ… Created `babel.cfg` configuration file
4. âœ… Updated `app_init.py` with Babel initialization
5. âœ… Created `language_routes.py` for API endpoints
6. âœ… Created `translation_manager.py` for translation management
7. âœ… Created `static/js/i18n.js` for frontend translation
8. âœ… Created language switcher component
9. âœ… Updated templates to include language switcher

## Next Steps

### To Fully Activate Multi-Language Support:

1. **Install Flask-Babel:**
   ```bash
   pip install -r requirements.txt
   ```

2. **Generate Translation Files:**
   ```bash
   python translation_manager.py
   ```

3. **Update Database:**
   ```bash
   # Run migrations to add language_preference column
   python -c "from app_init import app, db; db.create_all()"
   ```

4. **Start Your Application:**
   ```bash
   python main.py
   ```

5. **Test Language Switching:**
   - Log in to your application
   - Click the language switcher (ğŸŒ) in the sidebar
   - Select a different language
   - The page should reload with the new language

## Extending to More Content

To translate all your application content:

1. **Add more strings to `translation_manager.py`** - Include all UI text, error messages, form labels, etc.

2. **Use the i18n system in templates:**
   ```html
   <!-- In HTML templates -->
   <h1 data-i18n="Welcome to Casual Worker Manager">Welcome to Casual Worker Manager</h1>
   
   <!-- In Jinja2 with gettext -->
   <p>{{ _('This is translatable text') }}</p>
   ```

3. **Use the i18n system in JavaScript:**
   ```javascript
   const message = window.i18n.t('Success');
   alert(message);
   ```

## Supported Character Encodings

All translation files use UTF-8 encoding, supporting:
- âœ… Latin scripts (English, French, Portuguese, Spanish, Turkish)
- âœ… Cyrillic (not currently added, but supported)
- âœ… Arabic script
- âœ… Devanagari script (Hindi)
- âœ… Simplified/Traditional Chinese characters

## Troubleshooting

### Language switcher not appearing?
- Make sure `templates/components/language_switcher.html` exists
- Check browser console for JavaScript errors
- Verify `/api/languages` endpoint is accessible

### Translations not loading?
- Run `python translation_manager.py` to generate JSON files
- Check `static/translations/` directory for translation files
- Verify correct language code is being used

### Database column not created?
- Run database migration: `python -c "from app_init import app, db; db.create_all()"`
- Check that `models.py` has `language_preference` field in User class

## Performance Considerations

- Translation JSON files are loaded once per page load (cached in browser)
- Language preference is stored in database, not session
- Locale selector in Flask-Babel optimizes language selection
- No external API calls needed for translations

## Future Enhancements

1. Add RTL (Right-to-Left) support for Arabic
2. Implement pluralization rules for each language
3. Add date/time format localization
4. Create translation management UI for admins
5. Add automatic language detection from IP geolocation
6. Implement lazy loading for translation files
7. Add community translation contributions feature

## Support for More Languages

To add additional languages:

1. Add language code and name to `app.config['LANGUAGES']` in `app_init.py`
2. Add translations to `TRANSLATIONS` dict in `translation_manager.py`
3. Run `python translation_manager.py` to generate JSON files
4. Update this documentation

Example for adding German (de):
```python
# In app_init.py
'de': 'Deutsch',

# In translation_manager.py TRANSLATIONS dict
"Hello": {
    "de": "Hallo",
    # ... other languages
}
```

---

**Last Updated:** November 2025
**Language Support:** 10 languages (English, French, Swahili, Portuguese, Spanish, Turkish, Hindi, Chinese, Arabic)
