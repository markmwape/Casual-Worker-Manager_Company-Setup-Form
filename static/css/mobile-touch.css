/* Mobile Touch Optimization CSS */
/* This file ensures all interactive elements work properly on mobile devices */

/* Global mobile optimizations */
@media (max-width: 1023px) {
    /* Ensure all clickable elements have proper touch targets */
    button, .btn, a, input[type="submit"], input[type="button"], [role="button"] {
        min-height: 44px; /* Apple's recommended minimum */
        min-width: 44px;
        touch-action: manipulation;
        -webkit-tap-highlight-color: transparent;
        user-select: none;
        -webkit-user-select: none;
    }
    
    /* Input fields optimization */
    input, textarea, select {
        touch-action: manipulation;
        -webkit-tap-highlight-color: transparent;
    }
    
    /* Prevent zoom on form inputs on iOS */
    input[type="text"], 
    input[type="email"], 
    input[type="password"], 
    input[type="search"],
    input[type="tel"],
    input[type="url"],
    textarea {
        font-size: 16px; /* Prevents zoom on iOS Safari */
    }
    
    /* Links optimization */
    a {
        touch-action: manipulation;
        -webkit-tap-highlight-color: rgba(0, 0, 0, 0.1);
        text-decoration: none;
    }
    
    /* Disable text selection on interactive elements */
    .btn, button, [role="button"] {
        -webkit-touch-callout: none;
        -webkit-user-select: none;
        -khtml-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
    }
    
    /* Active state feedback for better user experience */
    .btn:active, button:active, [role="button"]:active {
        transform: scale(0.98);
        transition: transform 0.1s ease;
        opacity: 0.8;
    }
    
    /* Sidebar menu specific optimizations */
    .sidebar-menu-item {
        min-height: 48px;
        touch-action: manipulation;
        -webkit-tap-highlight-color: rgba(255, 255, 255, 0.1);
        position: relative;
        overflow: hidden;
    }
    
    .sidebar-menu-item:active {
        background-color: rgba(255, 255, 255, 0.15) !important;
        transform: scale(0.98);
    }
    
    /* Menu icons should not interfere with touch */
    .sidebar-menu-item span,
    .sidebar-menu-item .material-icons,
    .sidebar-menu-item i {
        pointer-events: none;
        user-select: none;
    }
    
    /* Mobile drawer/sidebar optimizations */
    .drawer-overlay {
        touch-action: manipulation;
        -webkit-tap-highlight-color: transparent;
    }
    
    .mobile-sidebar-toggle {
        touch-action: manipulation;
        z-index: 9999;
    }
    
    .mobile-sidebar-toggle .btn {
        min-width: 48px;
        min-height: 48px;
        touch-action: manipulation;
    }
    
    /* Card and interactive element optimizations */
    .card-hover, .workspace-card {
        touch-action: manipulation;
    }
    
    /* Table row touch optimization */
    tr[onclick], .table-row-clickable {
        touch-action: manipulation;
        -webkit-tap-highlight-color: rgba(0, 0, 0, 0.05);
    }
    
    tr[onclick]:active, .table-row-clickable:active {
        background-color: rgba(0, 0, 0, 0.05);
    }
}

/* Specific optimizations for very small screens */
@media (max-width: 480px) {
    /* Larger touch targets for small screens */
    button, .btn, [role="button"] {
        min-height: 52px;
        padding: 12px 16px;
    }
    
    .sidebar-menu-item {
        min-height: 56px;
        padding: 16px !important;
        font-size: 16px;
    }
    
    /* Larger mobile toggle button */
    .mobile-sidebar-toggle .btn {
        min-width: 56px;
        min-height: 56px;
    }
    
    /* Better spacing for form elements */
    .form-control {
        margin-bottom: 16px;
    }
    
    input, textarea, select {
        min-height: 52px;
        padding: 12px 16px;
    }
}

/* iOS Safari specific fixes */
@supports (-webkit-touch-callout: none) {
    /* Fix for iOS Safari button styling */
    button, .btn, input[type="submit"], input[type="button"] {
        -webkit-appearance: none;
        appearance: none;
        border-radius: 8px;
    }
    
    /* Fix for iOS Safari input styling */
    input[type="text"], 
    input[type="email"], 
    input[type="password"], 
    input[type="search"],
    input[type="tel"],
    input[type="url"] {
        -webkit-appearance: none;
        appearance: none;
        border-radius: 8px;
    }
}

/* Landscape mobile optimizations */
@media (max-width: 900px) and (max-height: 500px) and (orientation: landscape) {
    /* Compact layout for landscape mobile */
    button, .btn {
        min-height: 40px;
        padding: 8px 12px;
    }
    
    .sidebar-menu-item {
        min-height: 44px;
        padding: 12px !important;
    }
    
    .mobile-sidebar-toggle .btn {
        min-width: 44px;
        min-height: 44px;
    }
}

/* Prevent double-tap zoom on iOS */
@media (max-width: 1023px) {
    * {
        -webkit-touch-callout: none;
        -webkit-tap-highlight-color: transparent;
    }
    
    /* Allow text selection only where needed */
    p, span:not(.btn):not([role="button"]), div:not(.btn):not([role="button"]) {
        -webkit-touch-callout: default;
        -webkit-user-select: text;
        user-select: text;
    }
}

/* Fix for modal and overlay interactions */
@media (max-width: 1023px) {
    .modal, .modal-box {
        touch-action: manipulation;
    }
    
    .modal-overlay, .modal-backdrop {
        touch-action: manipulation;
        -webkit-tap-highlight-color: transparent;
    }
    
    /* Ensure modals close properly on mobile */
    .modal-overlay:active, .modal-backdrop:active {
        opacity: 0.8;
    }
}

/* High contrast mode support for better accessibility */
@media (prefers-contrast: high) {
    .btn:active, button:active {
        outline: 2px solid currentColor;
        outline-offset: 2px;
    }
}

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {
    .btn:active, button:active, .sidebar-menu-item:active {
        transform: none;
        transition: none;
    }
}
